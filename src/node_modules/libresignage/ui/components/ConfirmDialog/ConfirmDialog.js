var BaseDialog = require('libresignage/ui/components/BaseDialog');

/**
* Callback function for a ConfirmDialog.
*
* @callback ConfirmDialog_callback
*
* @param {boolean} state True if the user clicked OK, false otherwise.
*/

/**
* A class representing a confirmation dialog.
*
* @memberof module:libresignage/ui/components
*/
class ConfirmDialog extends BaseDialog {
	/**
	* Construct a new ConfirmDialog.
	*
	* @param {string}                 title    The title of the dialog.
	* @param {string}                 body     The body of the dialog.
	* @param {ConfirmDialog_callback} callback The callback function.
	*/
	constructor(title, body, callback) {
		let tmp = this.make_template(title, body);

		// Add the confirmation dialog buttons and event listeners.
		tmp.content.querySelector('.dialog-interaction').innerHTML = `
			<button class="btn btn-primary btn-dialog btn-dialog-ok">
				Ok
			</button>
			<button class="btn btn-primary btn-dialog btn-dialog-cancel">
				Cancel
			</button>
		`;

		tmp.content
			.querySelector('.btn-dialog-ok')
			.addEventListener('click', () => {
				document.removeChild(document.querySelector('.dialog-overlay'));
				callback(true)
			});
		tmp.content
			.querySelector('.btn-dialog-cancel')
			.addEventListener('click', () => {
				document.removeChild(document.querySelector('.dialog-overlay'));
				callback(false)
			});

		document.body.appendChild(tmp.content);
	}
}
module.exports = ConfirmDialog;
